<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JW Player with Authorization</title>
    <script src="https://cdn.jwplayer.com/libraries/SAHhwvZq.js"></script>
</head>
<body>
    <div id="player"></div>

    <script>
        // Set JW Player key
        jwplayer.key = 'XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo';

        window.onload = function() {
            // Define the DASH stream source with Authorization and DRM
            var source = {
                "file": "https://d1yws6emo43ny.cloudfront.net/CH5/masterCH5.mpd",
                "default": true,
                onXhrOpen: function(xhr, url) {
                    xhr.setRequestHeader(
                        'Authorization',
                        'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ3bXZlciI6Miwid21pZGZtdCI6ImFzY2lpIiwid21pZHR5cCI6MSwid21rZXl2ZXIiOjEsIndtaWRsZW4iOjUxMiwid21pZCI6Ik9HWmpaRFJpWm1VdE9ESTROQzAwWWpFeExUa3lPVFl0TldRME1UZ3dNakF4TmpFeiIsIndtb3BpZCI6MzIsImV4cCI6MTczODAzOTc0MCwiaWF0IjoxNzM3NDM1NzQwfQ.LbTU4ibYQSip1nQiN2poRSN5iqcMVCHHA5tV2C36uKU'
                    );
                }
            };

            // Add DASH type and DRM configuration
            source.type = "dash";
            source.drm = {
                "clearkey": {
                    "keyId": "a8eb0f152c6e429ca7a53f399aadf257",
                    "key": "c593c2eeea62742285b99e4d87b1c84a"
                }
            };

            // Setup JW Player
            var playerInstance = jwplayer("player");
            playerInstance.setup({
                playlist: [{
                    "sources": [source]
                }],
                width: "100%",
                height: "100%",
                aspectratio: "16:9",
                autostart: true,
                cast: {
                    appid: 'CC1AD845'
                }
            });

            // Optional: Handle player events or errors
            playerInstance.on("ready", function() {
                console.log("JW Player is ready.");
            });

            playerInstance.on("error", function(error) {
                console.error("Player Error:", error.message);
            });
        };
    </script>
</body>
</html>
