<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Token Test Player</title>
    <style>
        #jwplayerDiv {
            width: 100%;
            height: 100%;
        }
    </style>
    <script src="https://cdn.jwplayer.com/libraries/SAHhwvZq.js"></script>
</head>
<body>
    <div id="jwplayerDiv"></div>
    <script>
        const dashStreamUrl = "https://d1yws6emo43ny.cloudfront.net/CH5/masterCH5.mpd";
        const bearerToken = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ3bXZlciI6Miwid21pZGZtdCI6ImFzY2lpIiwid21pZHR5cCI6MSwid21rZXl2ZXIiOjEsIndtaWRsZW4iOjUxMiwid21pZCI6Ik9HWmpaRFJpWm1VdE9ESTROQzAwWWpFeExUa3lPVFl0TldRME1UZ3dNakF4TmpFeiIsIndtb3BpZCI6MzIsImV4cCI6MTczODAzOTc0MCwiaWF0IjoxNzM3NDM1NzQwfQ.LbTU4ibYQSip1nQiN2poRSN5iqcMVCHHA5tV2C36uKU";

        const playerInstance = jwplayer("jwplayerDiv");

        playerInstance.setup({
            file: dashStreamUrl,
            width: "100%",
            height: "100%",
            aspectratio: "16:9",
            autostart: true,
            mute: false,
            type: "dash",
            preload: "auto",
            cast: {
                appid: "CC1AD845"
            },
            // Attach Authorization Header to all requests
            xhrSetup: function(xhr) {
                xhr.setRequestHeader("Authorization", `Bearer ${bearerToken}`);
                console.log("Authorization header attached.");
            }
        });

        playerInstance.on("error", function(error) {
            console.error("Player Error:", error.message);
            alert("Failed to load the stream. Please check the token or stream URL.");
        });

        playerInstance.on("ready", function() {
            console.log("Player is ready.");
        });
    </script>
</body>
</html>
